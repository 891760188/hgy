<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>ECharts</title>
		<!-- 引入 echarts.js -->
		<script src="../../common/AppBooter.js"></script>
		<script src="../../../../resource/echarts3/echarts.min.js"></script>
		
	</head>

	<body>
		<header class="mui-bar mui-bar-nav">
			<a class="mui-back mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">关系图</h1>
		</header>
		<!-- 为ECharts准备一个具备大小（宽高）的Dom -->
		<div id="main" style="width: 100%;height:550px;margin-top: 80px;"></div>
		<script type="text/javascript">
			// 基于准备好的dom，初始化echarts实例
			mui.ready(function() {
				var myChart = echarts.init(document.getElementById('main'));

				myChart.showLoading();
				var webkitDep = {
					"type": "force",
					"categories": [{
						"name": "一级",
						"keyword": {},
						"itemStyle": {
							"normal": {
								"color": "#ff713c"
							}
						},
						"base": "关系"
					}, {
						"name": "二级",
						"keyword": {},
						"itemStyle": {
							"normal": {
								"color": "#78bc27"
							}
						},
						"base": "关系"
					}, {
						"name": "三级",
						"keyword": {},
						"itemStyle": {
							"normal": {
								"color": "#36cbde"
							}
						},
						"base": "关系"
					}, {
						"name": "四级",
						"keyword": {},
						"itemStyle": {
							"normal": {
								"color": "#4896cd"
							}
						},
						"base": ""
					}],
					"nodes": demoData,
					"links": links
				};

				myChart.hideLoading();

				option = {
					legend: {
						data: webkitDep.categories.map(function(a) {
							return a.name;
						}) //此处的数据必须和关系网类别中name相对应
					},
					series: [{
						type: 'graph',
						layout: 'force',
						animation: true,
						label: {
							normal: {
								show: true,
								position: 'right'
							}
						},
						draggable: true,
						roam: true,
						data: webkitDep.nodes.map(function(node, idx) {
							node.id = idx;
							return node;
						}),
						categories: webkitDep.categories,
						force: {
							edgeLength: 95, //连线的长度
							repulsion: 90 //子节点之间的间距
						},
						links: webkitDep.links
					}]
				};
				myChart.setOption(option);
			})
		</script>
		<script src="data.js"></script>
	</body>

</html>