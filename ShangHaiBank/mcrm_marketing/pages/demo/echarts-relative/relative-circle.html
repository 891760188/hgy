<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>ECharts</title>
		<!-- 引入 echarts.js -->
		<script src="../../common/AppBooter.js"></script>
		<script src="../../../../resource/echarts3/echarts.min.js"></script>

	</head>

	<body>
		<header class="mui-bar mui-bar-nav">
			<a class="mui-back mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">关系图</h1>
		</header>
		<!-- 为ECharts准备一个具备大小（宽高）的Dom -->
		<div id="main" style="width:100%;height:550px;margin-top: 80px;"></div>
		<script type="text/javascript">
			// 基于准备好的dom，初始化echarts实例
			mui.ready(function() {
				
				
				var myChart = echarts.init(document.getElementById('main'));

				myChart.showLoading();
				myChart.hideLoading();

				option = {
					legend: {
						data: cir_category.map(function(a) {
							return a.name;
						}) //此处的数据必须和关系网类别中name相对应
					},
					animationDurationUpdate: 1500,
					animationEasingUpdate: 'quinticInOut',
					series: [{
						type: 'graph',
						layout: 'none',
						circular: {
							rotateLabel: false
						},
						label: {
							normal: {
								show: true,
								position: 'top'
							}
						},
						data: cir_data.map(function(node, idx) {
							if(idx < 5 && idx > 0) {
								node['label'] = {
									'normal': {
										"position": [10, 0]
									}
								}
							}

							if(idx < 11 && idx >= 5) {
								node['label'] = {
									'normal': {
										"position": [-5, 10]
									}
								}
							}

							if(idx < 15 && idx >= 11) {
								node['label'] = {
									'normal': {
										"position": [-55, 0]
									}
								}
							}
							return node;
						}),
						categories: cir_category,
						roam: true,
						lineStyle: {
							normal: {
								color: 'source',
								curveness: 0.1
							}
						},
						force: {
							edgeLength: 95, //连线的长度
							repulsion: 40 //子节点之间的间距
						},
						links: cir_link
					}]
				};
				myChart.setOption(option);
			})
		</script>
		<script src="data.js"></script>
	</body>

</html>