<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>奖金测算</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<!--公共js-->
		<script src="../../../common/AppBooter.js"></script>		
		<style>
			.fonts{
				position: absolute;
				right: 10px;
			}
			#formss:before{
				display: none;
			}
			#formss:after{
				display: none;
			}
			.mui-btn-primary{
				border:1px solid #f99900;
				background-color:#f99900;
			}
			.mui-bar-tab~.mui-content{padding-bottom: 0;}
			.mui-input-group .mui-input-row:after, .mui-input-group:before{background-color: #e5e5e5;}
			
		</style>
	</head>

	<body class="dark-bg">
		<header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">奖金测算</h1>
			</a>

		</header>
		<nav class="mui-bar mui-bar-tab">
			<a class="mui-tab-item mui-active" href="#mcc-custView">
				<span class="mui-icon mui-icon-list"></span>
				<span class="mui-tab-label">机构奖金测算</span>
			</a>
			<a class="mui-tab-item" href="#mcc-custFootmark">
				<span class="mui-icon mui-icon-map"></span>
				<span class="mui-tab-label">奖金率</span>
			</a>
		</nav>
		<div class="mui-content dark-input">
			<div id="mcc-custView" class="mui-control-content mui-active">
				<form id="forms" class="mui-input-group" style="margin-top: -2px;">
					<div class="ys-custTitle">机构奖金测算</div>
						<div class="mui-input-row">
							<label>存款年日均:<font class="fonts">万元</font></label>
							<input id="roleId1" type="tel" name="fal" onblur="changes(this)" placeholder="输入存款年日均">
						</div>
						<div class="mui-input-row">
							<label>贷款年日均:<font class="fonts">万元</font></label>
							<input id="roleId2" type="tel" name="fal" onblur="changes(this)" placeholder="输入贷款年日均">
						</div>
						<div class="mui-input-row">
							<label>创利:<font class="fonts">万元</font></label>
							<input id="roleId3" type="tel" name="fal" onblur="changes(this)" placeholder="输入创利">
						</div>
						<div class="mui-input-row">
							<label>新增有效户:<font class="fonts">万元</font></label>
							<input id="roleId4" type="tel" name="fal" onblur="changes(this)" placeholder="输入新增有效户">
						</div>
						<div class="mui-input-row">
							<label>票据贴现:<font class="fonts">万元</font></label>
							<input id="roleId5" type="tel" name="fal" onblur="changes(this)" placeholder="输入票据贴现">
						</div>
					</form>
					<form id="formss" class="mui-input-group">
						<div class="mui-input-row">
							<label>预计奖金为:<font class="fonts">元</font></label>
							<input id="roleId6" type="number" readonly="readonly" >
						</div>
						<div class="mui-button-row dark-bg">
							<button type="button" class="mui-btn mui-btn-danger" onclick="calculate()">奖金测算</button>
							&nbsp;&nbsp;
							<button type="button" class="mui-btn mui-btn-primary" onclick="resets()">重&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;置</button>
						</div>
						
					</form>
			</div>
			<div id="mcc-custFootmark" class="mui-control-content">
				<form id="forms1" class="mui-input-group"  style="margin-top: -2px;">
					<div class="ys-custTitle">奖金率</div>
						<div class="mui-input-row">
							<label>存款年日均:</label>
							<input id="roleId7" type="text" readonly="readonly" placeholder="0.5%">
						</div>
						<div class="mui-input-row">
							<label>贷款年日均:</label>
							<input id="roleId8" type="text" readonly="readonly" placeholder="0.34%">
						</div>
						<div class="mui-input-row">
							<label>创利:</label>
							<input id="roleId9" type="text" readonly="readonly" placeholder="3%">
						</div>
						<div class="mui-input-row">
							<label>新增有效户:</label>
							<input id="roleId10" type="text" readonly="readonly" placeholder="4">
						</div>
						<div class="mui-input-row">
							<label>票据贴现:</label>
							<input id="roleId11" type="text" readonly="readonly" placeholder="566">
						</div>
					</form>
			</div>
		</div>
</body>
	<script>
		mui.init({
			swipeBack: true //启用右滑关闭功能
		});
		mui('.mui-scroll-wrapper').scroll();
		var forms=document.getElementById('forms');
		var inputs=document.querySelectorAll('#forms>div>input');
		function resets(){
			forms.reset();
			for(var i=0;i<inputs.length;i++){
				var content=inputs[i].parentElement.children[0].innerHTML; 
				if(inputs[i].getAttribute('name')=='fal'){
					inputs[i].parentElement.children[0].innerHTML=content.replace('<span style="color:red">*</span>:',':');
				}
			}
		}
		var times=0;
		function changes(obj){
			var patt=new RegExp("^[0-9]+(.[0-9]{2})?$");
			var content=obj.parentElement.children[0].innerHTML; 
			obj.value=obj.value.replace(',','');
			if(patt.test(obj.value)){
				obj.parentElement.children[0].innerHTML=content.replace('<span style="color:red">*</span>:',':');
				obj.setAttribute('name','tr');
				obj.value=(parseInt(obj.value).toFixed(2) + '').replace(/\d{1,3}(?=(\d{3})+(\.\d*)?$)/g, '$&,');
			}else if(content.indexOf("*")==-1){
				obj.parentElement.children[0].innerHTML=content.replace(':','<span style="color:red">*</span>:');
				obj.setAttribute('name','fal');
				mui.toast("请完善您的信息");
			}
			
		}
		function calculate(){
			for(var i=0;i<inputs.length;i++){
				var content=inputs[i].parentElement.children[0].innerHTML; 
				if(inputs[i].getAttribute('name')=='tr'){
					inputs[i].parentElement.children[0].innerHTML=content.replace('<span style="color:red">*</span>:',':');
				}else if(content.indexOf("*")==-1){
					inputs[i].parentElement.children[0].innerHTML=content.replace(':','<span style="color:red">*</span>:');
					if(times==0){
						mui.toast("请完善您的信息");
						times=1;
					}
				}else{
					if(times==0){
						mui.toast("请完善您的信息");
						times=1;
					}
				}
			}
			if(times==0){
				document.getElementById('roleId6').value = 10;
//				mui.alert('计算');
			}
			times=0;
		}
	</script>

</html>