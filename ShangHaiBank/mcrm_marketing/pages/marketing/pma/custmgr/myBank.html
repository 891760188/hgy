<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>我的存款</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<script type="text/javascript" src="../../../common/AppBooter.js" ></script>
		<style>
			.chart {
				height: 420px;
				margin: 0px;
				padding: 0px;
			}
			#popover1{
				margin-top: 43px;
			}
		</style>
	</head>
	<body>
		<header class="mui-bar mui-bar-nav">
		    <a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
		    <!--<a class="mui-icon mui-icon-right-nav mui-pull-right"></a>-->
		    <h1 id="mtBt" class="mui-title"><span class="mtIcoDro icon-play3">对公存款</span></h1>
		</header>
		<div class="mui-content">
					<table id="ulId">
						
					</table>
					<div id="fxchartId">
						<div class="chart" id="barChart"></div>
						<br/><br/>
						<div style="clear:both;"></div>
					</div>
		</div>
		<div id="popover1" class="mui-popover mui-title-menu">
	    	<div class="mui-popover-arrow"></div>
			<ul class="mui-table-view">
				<li class="mui-table-view-cell"><a style="text-align: center;">对公存款</a></li>
				<li class="mui-table-view-cell"><a style="text-align: center;">常规类存款</a></li>
				<li class="mui-table-view-cell"><a style="text-align: center;">对公营业收入</a></li>
				<li class="mui-table-view-cell"><a style="text-align: center;">对公优质无贷户</a></li>
				<li class="mui-table-view-cell"><a style="text-align: center;">内控合规管理</a></li>
			</ul>
		</div>
    		<script type="text/javascript" src="../../../../../resource/mui/js/echarts-all.js"></script>
		<script type="text/javascript">
			//App配置信息
			var appConfig = {
				//是否启用右滑关闭功能
				swipeBack: false
			};
			/**
			 * 页面初始化
			 */
			_App.init(appConfig);
			mui.ready(function(){
				document.getElementById("fxchartId").style.display="block";
				//调用展示图
				barChart.setOption(getOption('bar',num));
			});
			var ulId=document.getElementById('ulId');
			var mtBt=document.querySelector('#mtBt');
			var num=parseInt(_App.util.getUrlParamByName('type')); 
			var name=decodeURIComponent(_App.util.getUrlParamByName('name'));
			if(isNaN(num)){
				num=1;
			}
			if(name=="undefined"){
				name='对公存款';
			}
			mtBt.innerHTML='<span class="mtIcoDro icon-play3">'+name+'</span>';
			
			mui.plusReady(function(){
				var t1=num*4-3;var t2=num*4-2;var t3=num*4-1;var t4=num*4;
				ulId.innerHTML='<tr><th>'+t1+'月</th><th>'+t2+'月</th><th>'+t3+'月</th><th>'+t4+'月</th></tr>'
						+'<tr><td>7,489</td><td>10,921</td><td>8,643</td><td>6,033</td></tr>'
						+'<tr><td>149%</td><td>91%</td><td>86%</td><td>75%</td></tr>'
			});
			var goPage = function(url) {
				_App.util.goPage(url);
			};
			mtBt.addEventListener('tap',function(){
				mui('#popover1').popover('toggle');
			});
			mui('#popover1').on('tap','ul>li>a',function(){
				mtBt.innerHTML='<span class="mtIcoDro icon-play3">'+this.innerHTML+'</span>';
				mui('#popover1').popover('toggle');
			});
			var getOption = function(chartType,num) {
				var chartOption = {
					title : {
				        text: '',
				        x:'center',
				      	textStyle:{color:'black',fontWeight:'lighter'}
				    },
				    tooltip : {
				        trigger: 'axis',
				        axisPointer : {            // 坐标轴指示器，坐标轴触发有效
				            type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
				        }
				    },
				    
					legend: {
				        orient: 'horizontal', // 'vertical'
				        x: 'center', // 'center' | 'left' | {number},
				        y: 'bottom', // 'center' | 'bottom' | {number}
				        backgroundColor: '#ffffff',
				        borderColor: 'rgba(178,34,34,0.8)',
				        borderWidth: 1,
				        padding: 1,    // [5, 10, 15, 20]
				        itemGap: 5,
				        textStyle: {color: 'red'},
				        data: [
				            '目标值','完成值'
				        ]
				    },
					grid: {
						x: 45,
						x2: 10,
						y: 30,
						y2: 45
					},
					toolbox: {
						show: false,
						feature: {
							mark: {
								show: true,
							},
							dataView: {
								show: true,
								readOnly: false
							},
							magicType: {
								show: true,
								type: ['line', 'bar']
							},
							restore: {
								show: true
							},
							saveAsImage: {
								show: true
							}
						}
					},
				
					calculable: false,
					xAxis: [{
						type: 'category',
						data: [num*4-3+'月', num*4-2+'月', num*4-1+'月', num*4+'月'],
					}],	
					yAxis: [{
						type: 'value',
						splitArea: {
							show: true
						}
					}],
					series: [{
						name: '目标值',
						barWidth:'40',
						type: chartType,
						data: [5000.00, 12000.00, 10000.00, 8000.00],
						itemStyle: {normal:{color:'#ff713c',}}
						
					},{
						name: '完成值',
						type: 'line',
						itemStyle: {normal:{color:'#007aff'}},
						data: [7489.00, 10921.00, 8643.0, 6033.00]
					}]
				};
				return chartOption;
			};
			
			var barChart = echarts.init(document.getElementById('barChart'));
		</script>
	</body>
</html>