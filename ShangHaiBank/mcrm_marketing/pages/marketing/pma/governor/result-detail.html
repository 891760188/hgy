<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>机构排名详情</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<script type="text/javascript" src="../../../common/AppBooter.js"></script>
		<style>
			.chart {
				height: 400px;
				margin: 0px;
				padding: 0px;
			}
		</style>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 id="title" class="mui-title"></h1>
		</header>
		<div class="mui-content">
			<div id="mcc-opportRank" class="mui-control-content mui-active">
				<div id="slider" class="mui-slider">
					<div class="mui-slider-indicator mui-segmented-control mui-segmented-control-inverted">
						<a class="mui-control-item mui-active" href="#tab1">对公存款</a>
						<a class="mui-control-item" href="#tab2" id="tab2Id">储蓄</a>
						<a class="mui-control-item" href="#tab3" id="tab3Id">个贷</a>
					</div>
					<div class="mui-slider-progress-bar mui-col-xs-4"></div>
					<div id="sdiv" class="mui-slider-group">
						<div id="tab1" class="mui-slider-item mui-control-content mui-active">
							<table border="1" width="100%">
								<tr>
									<th>1月</th>
									<th>2月</th>
									<th>3月</th>
									<th>4月</th>
								</tr>
								<tr>
									<td>4,789</td>
									<td>13,921</td>
									<td>22,323</td>
									<td>7,885</td>
								</tr>
								<tr>
									<td>47%</td>
									<td>139%</td>
									<td>148%</td>
									<td>43%</td>
								</tr>
							</table>
							<div id="fxchartId">
								<div class="chart" id="barChart"></div>
								<br/><br/>
								<div style="clear:both;"></div>
							</div>
						</div>
						<div id="tab2" class="mui-slider-item mui-control-content">
							<table border="1" width="100%">
								<tr>
									<th>1月</th>
									<th>2月</th>
									<th>3月</th>
									<th>4月</th>
								</tr>
								<tr>
									<td>19,789</td>
									<td>13,921</td>
									<td>8,323</td>
									<td>14,885</td>
								</tr>
								<tr>
									<td>131%</td>
									<td>88%</td>
									<td>57%</td>
									<td>114%</td>
								</tr>
							</table>
							<div id="fxchartId">
								<div class="chart" id="barChart1"></div>
								<br/><br/>
								<div style="clear:both;"></div>
							</div>
						</div>
						<div id="tab3" class="mui-slider-item mui-control-content">
							<table border="1" width="100%">
								<tr>
									<th>1月</th>
									<th>2月</th>
									<th>3月</th>
									<th>4月</th>
								</tr>
								<tr>
									<td>22,789</td>
									<td>25,921</td>
									<td>15,023</td>
									<td>9,885</td>
								</tr>
								<tr>
									<td>151%</td>
									<td>144%</td>
									<td>79%</td>
									<td>99%</td>
								</tr>
							</table>
							<div id="fxchartId">
								<div class="chart" id="barChart2"></div>
								<br/><br/>
								<div style="clear:both;"></div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script type="text/javascript" src="../../../../resource/mui/js/echarts-all.js"></script>
		<script type="text/javascript">
			//App配置信息
			var appConfig = {
				//是否启用右滑关闭功能
				swipeBack: false
			};
			/**
			 * 页面初始化
			 */
			_App.init(appConfig);
			mui('.mui-scroll-wrapper').scroll();
			var title = document.getElementById('title');
			var name = decodeURIComponent(_App.util.getUrlParamByName('name'));
			var type = _App.util.getUrlParamByName('type');
			var sliders = document.querySelector('.mui-slider-indicator.mui-segmented-control');
			var defaultTab = document.querySelectorAll('.mui-active');
			var tab2 = document.getElementById('tab2');
			var tab3 = document.getElementById('tab3');
			var datas1=['10,000:4,789','10,000:13,921','15,000:22,323','18,000:7,885'];
			var datas2=['15,000:19,789','18,000:15,841','15,000:10,323','13,000:14,885'];
			var datas3=['15,000:22,789','18,000:25,921','20,000:15,303','18,000:17,885'];
			title.innerHTML = name;
			if (type == 1) {
				defaultTab[1].classList.remove('mui-active');
				defaultTab[2].classList.remove('mui-active');
				sliders.children[1].classList.add('mui-active');
				tab2.classList.add('mui-active');
			} else if (type == 2) {
				defaultTab[1].classList.remove('mui-active');
				defaultTab[2].classList.remove('mui-active');
				sliders.children[2].classList.add('mui-active');
				tab3.classList.add('mui-active');
			}
			mui.ready(function() {
				document.getElementById("fxchartId").style.display = "block";
				//调用展示图
				barChart.setOption(getOption('bar', datas1));
				barChart1.setOption(getOption('bar', datas2));
				barChart2.setOption(getOption('bar', datas3));
				
			});
			mui.plusReady(function() {
				var s = document.querySelector('body').scrollHeight - document.querySelector('header').scrollHeight - 44;
				document.getElementById('sdiv').style.height = s + 'px';
				document.getElementById('slider').style.display = "block";
			});
			var goPage = function(url) {
				_App.util.goPage(url);
			};
			var change=function(num){
				return num.replace(',','');
			}
			var getOption = function(chartType, num) {
				var chartOption = {
					title: {
						text: '',
						x: 'center',
						textStyle: {
							color: 'black',
							fontWeight: 'lighter'
						}
					},
					tooltip: {
						trigger: 'axis',
						axisPointer: { // 坐标轴指示器，坐标轴触发有效
							type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'
						}
					},
					legend: {
						orient: 'horizontal', // 'vertical'
						x: 'center', // 'center' | 'left' | {number},
						y: 'bottom', // 'center' | 'bottom' | {number}
						backgroundColor: '#ffffff',
						borderColor: 'rgba(178,34,34,0.8)',
						borderWidth: 1,
						padding: 1, // [5, 10, 15, 20]
						itemGap: 5,
						textStyle: {
							color: 'red'
						},
						data: [
							'目标值','完成值'
						]
					},
					grid: {
						x: 45,
						x2: 20,
						y: 30,
						y2: 45
					},
					toolbox: {
						show: false,
						feature: {
							mark: {
								show: true
							},
							dataView: {
								show: true,
								readOnly: false
							},
							magicType: {
								show: true,
								type: ['line', 'bar']
							},
							restore: {
								show: true
							},
							saveAsImage: {
								show: true
							}
						}
					},
					calculable: false,
					xAxis: [{
						type: 'category',
						data: ['1月', '2月', '3月', '4月']
					}],
					yAxis: [{
						type: 'value',
						splitArea: {
							show: true
						}
					}],
					series: [{
						name: '目标值',
						type: chartType,
						data: [change(num[0].split(':')[0]), change(num[1].split(':')[0]), change(num[2].split(':')[0]), change(num[3].split(':')[0])]
					}, {
						name: '完成值',
						type: 'line',
						data: [change(num[0].split(':')[1]), change(num[1].split(':')[1]),change(num[2].split(':')[1]), change(num[3].split(':')[1])]
					}]
				};
				return chartOption;
			};
			var barChart = echarts.init(document.getElementById('barChart'));
			var barChart1 = echarts.init(document.getElementById('barChart1'));
			var barChart2 = echarts.init(document.getElementById('barChart2'));
		</script>
	</body>

</html>